# Developer guide  

## Setup  

Please see [the main Nextstrain docs](https://nextstrain.org/docs/getting-started/introduction#open-source-tools-for-the-community) for instructions for installing the Nextstrain bioinformatics pipeline (Augur) and visualization tools (Auspice).

## Data

In order to run the Nextstrain build you must provision `./data/sequences.fasta` and `./data/metadata.tsv`.
We've included a test set of sequences that are publicly available via Genbank as `./example_data/sequences.fasta`.

## API Access  

API access to the evolutionary analysis that powers the visualization at [nextstrain.org/ncov](https://nextstrain.org/ncov) is available at [http://data.nextstrain.org/ncov.json](http://data.nextstrain.org/ncov.json). Schema information [here](https://github.com/nextstrain/augur/blob/master/augur/data/schema-export-v2.json).


## Running

Begin by copying the example data into the main data directory
```
cp example_data/sequences.fasta data/
```
Then, the entire build can be regenerated by running
```
snakemake -p
```
with a [local Nextstrain installation](https://nextstrain.org/docs/getting-started/local-installation) or by running
```
nextstrain build .
```
with a [containerized Nextstrain installation](https://nextstrain.org/docs/getting-started/container-installation).

The resulting output JSON at `auspice/ncov.json` can be visualized by running `auspice view --datasetDir auspice` or `nextstrain view auspice/` depending on local vs containerized installation.

_This requires [Augur](https://github.com/nextstrain/augur) version >=6.3.0, released Feb 13, 2020._
